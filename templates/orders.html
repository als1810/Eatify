{% extends "base.html" %}
{% block content %}
<h2>Orders</h2>

<table class="table table-bordered table-hover align-middle">
  <thead class="table-dark">
    <tr>
      <th>Order ID</th>
      <th>Customer</th>
      <th>Restaurant</th>
      <th>Dish</th>
      <th>Quantity</th>
      <th>Time</th>
      <th>Status</th>
      <th>Amount</th>
      <th>Payment Type</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for o in orders %}
    <tr>
      <td>{{ o.order_id }}</td>
      <td>{{ o.customer_name }}</td>
      <td>{{ o.restaurant_name }}</td>
      <td>{{ o.dish_name }}</td>
      <td>{{ o.quantity }}</td>
      <td>{{ o.order_time }}</td>
      <td>
        {% if o.status == "Completed" %}
          <span class="badge bg-success">{{ o.status }}</span>
        {% elif o.status == "Pending" %}
          <span class="badge bg-warning text-dark">{{ o.status }}</span>
        {% elif o.status == "Cancelled" %}
          <span class="badge bg-danger">{{ o.status }}</span>
        {% else %}
          <span class="badge bg-secondary">{{ o.status }}</span>
        {% endif %}
      </td>
      <td>â‚¹{{ o.amount }}</td>
      <td>{{ o.payment_type }}</td>
      <td>
        <a href="{{ url_for('update_order', order_id=o.order_id) }}" class="btn btn-sm btn-outline-primary">âœï¸ Edit</a>
        <form method="POST" action="{{ url_for('delete_order', order_id=o.order_id) }}" style="display:inline;">
          <button type="submit" class="btn btn-sm btn-outline-danger" onclick="return confirm('Are you sure you want to delete this order?');">ğŸ—‘ï¸ Delete</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<script>
  // Optional auto-refresh every 10 seconds
  setTimeout(() => window.location.reload(), 10000);
</script>
{% endblock %}
